<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>rajeesh</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="rajeesh">
<meta property="og:url" content="http://rajeeshcv.com/page/3/index.html">
<meta property="og:site_name" content="rajeesh">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="rajeesh">
<meta name="twitter:description">
<meta name="twitter:creator" content="@cvrajeesh">
<link rel="publisher" href="https://www.google.com/+RajeeshCV">
  
    <link rel="alternative" href="/atom.xml" title="rajeesh" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-647217-9', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">rajeesh</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Sharing My Thoughts</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
          <a class="main-nav-link" href="/projects">Projects</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="q" value="site:http://rajeeshcv.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-JQueryUI-Datepicker-in-ASP-Net-MVC" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2010/02/28/JQueryUI-Datepicker-in-ASP-Net-MVC/" class="article-date">
  <time datetime="2010-02-28T06:40:57.000Z" itemprop="datePublished">2010-02-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2010/02/28/JQueryUI-Datepicker-in-ASP-Net-MVC/">JQueryUI Datepicker in ASP.Net MVC</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Datepicker is nice and cool plugin for displaying the calendar with ease. It is very easy to use JQuery plugin, it comes as part of JQueryUI library, so if you want to use this – first download JQueryUI from <a href="http://jqueryui.com/download" target="_blank" rel="external">http://jqueryui.com/download</a> and also download JQuery(<a href="http://jquery.com/download/" target="_blank" rel="external">http://jquery.com/download/</a>) if you haven’t done yet.</p>
<p>Assume you have a form like one below</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span>&lt;%<span class="ruby"> using(<span class="constant">Html</span>.<span class="constant">BeginForm</span>())&#123;</span>%&gt;<span class="xml"></span><br><span class="line">    <span class="tag">&lt;<span class="title">fieldset</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">legend</span>&gt;</span>Event Information<span class="tag">&lt;/<span class="title">legend</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">label</span> <span class="attribute">for</span>=<span class="value">"EventName"</span>&gt;</span>Event Name:<span class="tag">&lt;/<span class="title">label</span>&gt;</span></span><br><span class="line">        </span>&lt;%=<span class="ruby"> <span class="constant">Html</span>.<span class="constant">TextBox</span>(<span class="string">"EventName"</span>)</span>%&gt;<span class="xml"></span><br><span class="line">      <span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">label</span> <span class="attribute">for</span>=<span class="value">"StartDate"</span>&gt;</span>Start Date:<span class="tag">&lt;/<span class="title">label</span>&gt;</span></span><br><span class="line">        </span>&lt;%=<span class="ruby"> <span class="constant">Html</span>.<span class="constant">TextBox</span>(<span class="string">"StartDate"</span>)</span>%&gt;<span class="xml"></span><br><span class="line">      <span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">label</span> <span class="attribute">for</span>=<span class="value">"EndDate"</span>&gt;</span>End Date:<span class="tag">&lt;/<span class="title">label</span>&gt;</span></span><br><span class="line">        </span>&lt;%=<span class="ruby"> <span class="constant">Html</span>.<span class="constant">TextBox</span>(<span class="string">"EndDate"</span>)</span>%&gt;<span class="xml"></span><br><span class="line">      <span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"submit"</span> <span class="attribute">value</span>=<span class="value">"Save"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">fieldset</span>&gt;</span></span><br><span class="line"></span>&lt;%<span class="ruby"> &#125;</span>%&gt;<span class="xml"></span></span><br></pre></td></tr></table></figure>
<p>and you want to attach datepicker to <code>StartDate</code> and <code>EndDate</code> input fields, what you needs to do is call the <code>datepicker</code> function on the these input field selector like below.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  $(<span class="string">'#StartDate'</span>).datepicker();</span><br><span class="line">  $(<span class="string">'#EndDate'</span>).datepicker();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>This works fine as we expected :)</p>
<h3 id="Difference_in_Date_format_patterns">Difference in Date format patterns</h3><p>Consider a scenario where your MVC application supports localization, then the selected date displayed in the input fields also should display the in the same date format of the current culture(This format could be custom one or default one).</p>
<p>This leads to you another issue – Datepicker plugin given by the JQueryUI supports different date formats, but it is different from one that is available in .NET. For e.g. in order to display a long day name (“Thursday”) .NET uses <strong>dddd*</strong> its equivalent in Datepicker is <strong>DD</strong>.</p>
<p>In order to solve this disparity between the .NET world and Datepicker world, I have created a html helper function, which could generate the Datepicker format from a .Net date format.</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="xmlDocTag">///</span> JQuery UI DatePicker helper.</span></span><br><span class="line"><span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">JQueryUIDatePickerHelper</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> Converts the .net supported date format current culture format into JQuery Datepicker format.</span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="html"&gt;</span>HtmlHelper object.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;returns&gt;</span>Format string that supported in JQuery Datepicker.<span class="xmlDocTag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="title">ConvertDateFormat</span><span class="params">(<span class="keyword">this</span> HtmlHelper html)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ConvertDateFormat(html, Thread.CurrentThread.CurrentCulture.DateTimeFormat.ShortDatePattern);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> Converts the .net supported date format current culture format into JQuery Datepicker format.</span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="html"&gt;</span>HtmlHelper object.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="format"&gt;</span>Date format supported by .NET.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;returns&gt;</span>Format string that supported in JQuery Datepicker.<span class="xmlDocTag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="title">ConvertDateFormat</span><span class="params">(<span class="keyword">this</span> HtmlHelper html, <span class="keyword">string</span> format)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="comment">/*</span><br><span class="line">         *  Date used in this comment : 5th - Nov - 2009 (Thursday)</span><br><span class="line">         *</span><br><span class="line">         *  .NET    JQueryUI        Output      Comment</span><br><span class="line">         *  --------------------------------------------------------------</span><br><span class="line">         *  d       d               5           day of month(No leading zero)</span><br><span class="line">         *  dd      dd              05          day of month(two digit)</span><br><span class="line">         *  ddd     D               Thu         day short name</span><br><span class="line">         *  dddd    DD              Thursday    day long name</span><br><span class="line">         *  M       m               11          month of year(No leading zero)</span><br><span class="line">         *  MM      mm              11          month of year(two digit)</span><br><span class="line">         *  MMM     M               Nov         month name short</span><br><span class="line">         *  MMMM    MM              November    month name long.</span><br><span class="line">         *  yy      y               09          Year(two digit)</span><br><span class="line">         *  yyyy    yy              2009        Year(four digit)             *</span><br><span class="line">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">string</span> currentFormat = format;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Convert the date</span></span><br><span class="line">        currentFormat = currentFormat.Replace(<span class="string">"dddd"</span>, <span class="string">"DD"</span>);</span><br><span class="line">        currentFormat = currentFormat.Replace(<span class="string">"ddd"</span>, <span class="string">"D"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Convert month</span></span><br><span class="line">        <span class="keyword">if</span> (currentFormat.Contains(<span class="string">"MMMM"</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            currentFormat = currentFormat.Replace(<span class="string">"MMMM"</span>, <span class="string">"MM"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">else</span> <span class="title">if</span> <span class="params">(currentFormat.Contains(<span class="string">"MMM"</span>)</span>)</span><br><span class="line">        </span>&#123;</span><br><span class="line">            currentFormat = currentFormat.Replace(<span class="string">"MMM"</span>, <span class="string">"M"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">else</span> <span class="title">if</span> <span class="params">(currentFormat.Contains(<span class="string">"MM"</span>)</span>)</span><br><span class="line">        </span>&#123;</span><br><span class="line">            currentFormat = currentFormat.Replace(<span class="string">"MM"</span>, <span class="string">"mm"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            currentFormat = currentFormat.Replace(<span class="string">"M"</span>, <span class="string">"m"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Convert year</span></span><br><span class="line">        currentFormat = currentFormat.Contains(<span class="string">"yyyy"</span>) ? currentFormat.Replace(<span class="string">"yyyy"</span>, <span class="string">"yy"</span>) : currentFormat.Replace(<span class="string">"yy"</span>, <span class="string">"y"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> currentFormat;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>So how we could make use this helper method, just replace the datepicker initialization code we have written earlier with this</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  $(<span class="string">'#StartDate'</span>).datepicker(&#123; dateFormat: <span class="string">'&lt;%= Html.ConvertDateFormat() %&gt;'</span> &#125;);</span><br><span class="line">  $(<span class="string">'#EndDate'</span>).datepicker(&#123; dateFormat: <span class="string">'&lt;%= Html.ConvertDateFormat() %&gt;'</span> &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Hope this helps.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2010/02/28/JQueryUI-Datepicker-in-ASP-Net-MVC/" data-id="ci9e0wvj9000hy4kta9rgn2cd" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2010/02/28/JQueryUI-Datepicker-in-ASP-Net-MVC/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Logging-Execution-Time-Using-AOP" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2010/02/27/Logging-Execution-Time-Using-AOP/" class="article-date">
  <time datetime="2010-02-27T06:12:22.000Z" itemprop="datePublished">2010-02-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2010/02/27/Logging-Execution-Time-Using-AOP/">Logging Execution Time Using AOP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>What happens if your client complains that your application is running very slow!!! or in your load/stress testing you found that some functionalities are very slow in executing than expected. This is the time where you go for profiling the execution, to analyse the root cause of these issues.</p>
<p>So how we could develop a profiler, where we don’t have to wrap our normal code in a profiling code.</p>
<p>Before going to create the profiler, we have to decide where to put the profiled information. In this tutorial, I am making use of <a href="http://logging.apache.org/log4net/" target="_blank" rel="external">Log4Net</a> as underlying layer to store this information. If you have not used <a href="http://logging.apache.org/log4net/" target="_blank" rel="external">Log4Net</a> before, I suggest you to read <a href="http://www.beefycode.com/post/Log4Net-Tutorial-pt-1-Getting-Started.aspx" target="_blank" rel="external">http://www.beefycode.com/post/Log4Net-Tutorial-pt-1-Getting-Started.aspx</a> as a starting point.</p>
<p>With the help of <strong>AOP (Aspect-Oriented Programming)</strong> we could do the profiling task without interrupting the actual code.</p>
<blockquote><p>AOP is a programming paradigm in which secondary or supporting functions are isolated from the main program’s business logic</p>
<footer><strong>Wikipedia</strong></footer></blockquote>
<p>So in order bring the AOP functionality into this application, I am going to use a third party library <a href="https://www.postsharp.net" target="_blank" rel="external">PostSharp</a>  which I believe this is one of the best that is available in the market.</p>
<p>So, now we have got the basic things to start with and now let’s start coding….</p>
<p>Start a new solution in visual studio and add a new console application project to it. Then add the below references to the newly created project</p>
<p>Add reference to the <em>Log4Net.dll</em>, <em>PostSharp.Laos.dll</em> and <em>PostSharp.Public.dll</em> (Please read  <a href="https://www.postsharp.net/documentation" target="_blank" rel="external">https://www.postsharp.net/documentation</a> to get the basic installation procedure). Next, create a new attribute class called <code>ProfileMethodAttribute</code> – this class is responsible for doing the profiling work. Make sure that you have decorated this class with <code>Serializable</code> attribute</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[Serializable]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ProfileMethodAttribute</span> : <span class="title">OnMethodBoundaryAspect</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnEntry</span><span class="params">(MethodExecutionEventArgs eventArgs)</span></span><br><span class="line">  </span>&#123;</span><br><span class="line">      ........</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnExit</span><span class="params">(MethodExecutionEventArgs eventArgs)</span></span><br><span class="line">  </span>&#123;</span><br><span class="line">     ......</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This class actually derives from <code>OnMethodBoundaryAspect</code>,  it has got two methods <code>OnEntry</code> and <code>OnExit</code> which we needed. These method will be called before the start of a method execution and at the end of method execution respectively, when this attribute is decorated against a method.</p>
<p>When a call comes to <code>OnEntry</code> method, we will first log the execution call using the <code>LoggerHelper</code>, then start a clock using another helper class <code>Profiler</code></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">LoggerHelper</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> Static instance of ILogger.</span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ILog logger;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> Initializes static members of the <span class="xmlDocTag">&lt;see cref="LoggerHelper"/&gt;</span> class.</span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="title">LoggerHelper</span><span class="params">()</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        log4net.Config.XmlConfigurator.Configure();</span><br><span class="line">        logger = LogManager.GetLogger(<span class="keyword">typeof</span>(Program));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> Logs the specified message.</span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="message"&gt;</span>The message.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Log</span><span class="params">(<span class="keyword">string</span> message)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">string</span> enableProfiling = ConfigurationManager.AppSettings[<span class="string">"EnableProfiling"</span>];</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">string</span>.IsNullOrEmpty(enableProfiling) || enableProfiling.ToLowerInvariant() == <span class="string">"true"</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            logger.Debug(message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> Logs the specified method name.</span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="methodName"&gt;</span>Name of the method.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="url"&gt;</span>The URL to log.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="executionFlowMessage"&gt;</span>The execution flow message.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="actualMessage"&gt;</span>The actual message.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Log</span><span class="params">(<span class="keyword">string</span> methodName, <span class="keyword">string</span> url, <span class="keyword">string</span> executionFlowMessage, <span class="keyword">string</span> actualMessage)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        Log(ConstructLog(methodName, url, executionFlowMessage, actualMessage));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> Logs the specified method name.</span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="methodName"&gt;</span>Name of the method.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="url"&gt;</span>The URL to log.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="executionFlowMessage"&gt;</span>The execution flow message.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="actualMessage"&gt;</span>The actual message.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="executionTime"&gt;</span>The execution time.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Log</span><span class="params">(<span class="keyword">string</span> methodName, <span class="keyword">string</span> url, <span class="keyword">string</span> executionFlowMessage, <span class="keyword">string</span> actualMessage, <span class="keyword">int</span> executionTime)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        Log(ConstructLog(methodName, url, executionFlowMessage, actualMessage, executionTime));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> Constructs the log.</span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="methodName"&gt;</span>Name of the method.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="url"&gt;</span>The URL to be logged.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="executionFlowMessage"&gt;</span>The execution flow message.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="actualMessage"&gt;</span>The actual message.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;returns&gt;</span>Formatted string.<span class="xmlDocTag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="title">ConstructLog</span><span class="params">(<span class="keyword">string</span> methodName, <span class="keyword">string</span> url, <span class="keyword">string</span> executionFlowMessage, <span class="keyword">string</span> actualMessage)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">string</span>.IsNullOrEmpty(methodName))</span><br><span class="line">        &#123;</span><br><span class="line">            sb.AppendFormat(<span class="string">"MethodName : &#123;0&#125;, "</span>, methodName);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">string</span>.IsNullOrEmpty(url))</span><br><span class="line">        &#123;</span><br><span class="line">            sb.AppendFormat(<span class="string">"Url : &#123;0&#125;, "</span>, url);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">string</span>.IsNullOrEmpty(executionFlowMessage))</span><br><span class="line">        &#123;</span><br><span class="line">            sb.AppendFormat(<span class="string">"ExecutionFlowMessage : &#123;0&#125;, "</span>, executionFlowMessage);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">string</span>.IsNullOrEmpty(actualMessage))</span><br><span class="line">        &#123;</span><br><span class="line">            sb.AppendFormat(<span class="string">"ActualMessage : &#123;0&#125;, "</span>, actualMessage);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">string</span> message = sb.ToString();</span><br><span class="line"></span><br><span class="line">        message = message.Remove(message.Length - <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> Constructs the log.</span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="methodName"&gt;</span>Name of the method.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="url"&gt;</span>The URL to be logged.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="executionFlowMessage"&gt;</span>The execution flow message.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="actualMessage"&gt;</span>The actual message.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name="executionTime"&gt;</span>The execution time.<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;returns&gt;</span>Formatted string.<span class="xmlDocTag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="title">ConstructLog</span><span class="params">(<span class="keyword">string</span> methodName, <span class="keyword">string</span> url, <span class="keyword">string</span> executionFlowMessage, <span class="keyword">string</span> actualMessage, <span class="keyword">int</span> executionTime)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">        sb.Append(ConstructLog(methodName, url, executionFlowMessage, actualMessage));</span><br><span class="line">        sb.AppendFormat(<span class="string">", ExecutionTime : &#123;0&#125;"</span>, executionTime);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sb.ToString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>LoggerHelper</code> uses the <code>Log4Net</code> objects to log the message to configured location. <code>Profiler</code> class implemented like below</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="xmlDocTag">///</span> Helper class that wraps the timer based functionalities.</span></span><br><span class="line"><span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">Profiler</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> Lock object.</span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="keyword">object</span> SyncLock = <span class="keyword">new</span> <span class="keyword">object</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> Variable that tracks the time.</span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> Dictionary&lt;<span class="keyword">int</span>, Stack&lt;<span class="keyword">long</span>&gt;&gt; ProfilePool;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> Initializes static members of the <span class="xmlDocTag">&lt;see cref="Profiler"/&gt;</span> class.</span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="title">Profiler</span><span class="params">()</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        ProfilePool = <span class="keyword">new</span> Dictionary&lt;<span class="keyword">int</span>, Stack&lt;<span class="keyword">long</span>&gt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> Starts this timer.</span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Start</span><span class="params">()</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">lock</span> (SyncLock)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> currentThreadId = Thread.CurrentThread.ManagedThreadId;</span><br><span class="line">            <span class="keyword">if</span> (ProfilePool.ContainsKey(currentThreadId))</span><br><span class="line">            &#123;</span><br><span class="line">                ProfilePool[currentThreadId].Push( Environment.TickCount );</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">var</span> timerStack = <span class="keyword">new</span> Stack&lt;<span class="keyword">long</span>&gt;();</span><br><span class="line">                timerStack.Push(DateTime.UtcNow.Ticks);</span><br><span class="line">                ProfilePool.Add(currentThreadId, timerStack);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> Stops timer and calculate the execution time.</span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;returns&gt;</span>Execution time in milli seconds<span class="xmlDocTag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">Stop</span><span class="params">()</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">lock</span> (SyncLock)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">long</span> currentTicks = DateTime.UtcNow.Ticks;</span><br><span class="line">            <span class="keyword">int</span> currentThreadId = Thread.CurrentThread.ManagedThreadId;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (ProfilePool.ContainsKey(currentThreadId))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">long</span> ticks = ProfilePool[currentThreadId].Pop();</span><br><span class="line">                <span class="keyword">if</span> (ProfilePool[currentThreadId].Count == <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    ProfilePool.Remove(currentThreadId);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">var</span> timeSpan = <span class="keyword">new</span> TimeSpan(currentTicks - ticks);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> (<span class="keyword">int</span>)timeSpan.TotalMilliseconds;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>which stores the starting tick and calculate the time taken to execute when <code>Stop</code> is called.</p>
<p>Below is code snippet from <code>OnEntry</code> method</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnEntry</span><span class="params">(MethodExecutionEventArgs eventArgs)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>._methodName = <span class="keyword">this</span>.ExcludeMethodName ? <span class="keyword">string</span>.Empty : eventArgs.Method.Name;</span><br><span class="line">    <span class="keyword">this</span>._url = <span class="keyword">this</span>.IncludeUrl ? <span class="keyword">string</span>.Empty : (HttpContext.Current == <span class="keyword">null</span>) ? <span class="keyword">string</span>.Empty : HttpContext.Current.Request.Url.ToString();</span><br><span class="line"></span><br><span class="line">    LoggerHelper.Log(<span class="keyword">this</span>._methodName, <span class="keyword">this</span>._url, <span class="keyword">this</span>.EntryMessage, <span class="keyword">this</span>.Message);</span><br><span class="line">    Profiler.Start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>And <code>OnExist</code>, is almost similar expect there we will stop the profile timer.</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnExit</span><span class="params">(MethodExecutionEventArgs eventArgs)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> count = Profiler.Stop();</span><br><span class="line">    LoggerHelper.Log(<span class="keyword">this</span>._methodName, <span class="keyword">this</span>._url, <span class="keyword">this</span>.EntryMessage, <span class="keyword">this</span>.Message, count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Next step is to use this and see whether it is logged properly. In order enable profiling for a method, you just needs to decorate it with the <code>ProfileMethod</code> attribute. Like below</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ProfileMethod()]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SimpleMethod</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    Thread.Sleep(<span class="number">5000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Then if you run the application and calls this above method, a log entry will be created where you have configured which looks like below</p>
<p>PROFILING 2010-02-26 00:19:59,838 [1] Log MethodName : SimpleMethod<br>PROFILING 2010-02-26 00:20:04,865 [1] Log MethodName : SimpleMethod, ExecutionTime : 5002</p>
<p>Please least me know, if this helped you.</p>
<blockquote>
<p>Download the demo code from <a href="http://cdn.rajeeshcv.com/download/ProfilingSample.zip" target="_blank" rel="external">here</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2010/02/27/Logging-Execution-Time-Using-AOP/" data-id="ci9e0wvj4000gy4kt0mg8ott5" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2010/02/27/Logging-Execution-Time-Using-AOP/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ASP-Net-MVC–Conditional-Rndering-Partial-Views-with-Action-T-Delegate" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2010/01/28/ASP-Net-MVC–Conditional-Rndering-Partial-Views-with-Action-T-Delegate/" class="article-date">
  <time datetime="2010-01-28T06:03:12.000Z" itemprop="datePublished">2010-01-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2010/01/28/ASP-Net-MVC–Conditional-Rndering-Partial-Views-with-Action-T-Delegate/">ASP.Net MVC – Conditional Rndering Partial Views with Action&lt;T&gt; Delegate</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is an update to my previous post regarding <a href="/2010/01/21/ASP-Net-MVC-Conditional-Rendering-Partial-Views/" title="conditional rendering partial views">conditional rendering partial views</a>, in that I used the internal implementation of the <code>Html.RenderPartail(…)</code> method to create the Html extension. Later I found a simple way to achieve the same using <code>Action&lt;T&gt;</code> delegate</p>
<p><code>&lt;% Html.PartialIf(this.Model.Exists, html =&gt; html.RenderPartial(&quot;MyPartialView&quot;)); %&gt;</code></p>
<p>If you look at the <code>PartialIf</code> implementation, it is simple, cleaner than the previous technique I have mentioned in my post.</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">PartialIf</span><span class="params">(<span class="keyword">this</span> HtmlHelper htmlHelper, <span class="keyword">bool</span> condition, Action&lt;HtmlHelper&gt; action)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (condition)</span><br><span class="line">    &#123;</span><br><span class="line">        action.Invoke(htmlHelper);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>That’s it :)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2010/01/28/ASP-Net-MVC–Conditional-Rndering-Partial-Views-with-Action-T-Delegate/" data-id="ci9e0wvn40011y4kt8cd6t1zy" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2010/01/28/ASP-Net-MVC–Conditional-Rndering-Partial-Views-with-Action-T-Delegate/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ASP-Net-MVC-Conditional-Rendering-Partial-Views" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2010/01/21/ASP-Net-MVC-Conditional-Rendering-Partial-Views/" class="article-date">
  <time datetime="2010-01-21T05:56:47.000Z" itemprop="datePublished">2010-01-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2010/01/21/ASP-Net-MVC-Conditional-Rendering-Partial-Views/">ASP.Net MVC - Conditional Rendering Partial Views</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Update:</strong> Later I found a cleaner and simple approach to do the same – read this post <a href="/2010/01/28/ASP-Net-MVC–Conditional-Rndering-Partial-Views-with-Action-T-Delegate/" title="ASP.Net MVC – Conditional rendering Partial Views with Action<T> delegate">ASP.Net MVC – Conditional rendering Partial Views with Action<t> delegate</t></a></p>
<p>Following my previous post about <a href="/2010/01/03/ASP-Net-MVC-Conditional-Rendering/" title="Conditional Rendering">Conditional Rendering</a>, one of my colleague asked me how to render the partial view based on a condition.</p>
<p>Normal way of doing this is</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span>(<span class="keyword">this</span>.Model.Exists)</span><br><span class="line"> &#123;</span><br><span class="line">     Html.RenderPartial(<span class="string">"MyPartialView"</span>);</span><br><span class="line"> &#125; %&gt;</span><br></pre></td></tr></table></figure>
<p>I am not sure about any other technique for rendering partial view conditionally other than this (correct me if I am wrong :) ).</p>
<p>Then I thought about copying the pattern I have used in my <a href="/2010/01/03/ASP-Net-MVC-Conditional-Rendering/" title="previous">previous</a> post and came up with this code which could conditionally render partial views and you could use the Html extension like below, which more clean than the previous</p>
<p><code>&lt;% Html.PartialIf(this.Model.Exists, &quot;MyPartialView&quot;); %&gt;</code></p>
<p>Below is the Html extension I have created</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">PartialIf</span><span class="params">(<span class="keyword">this</span> HtmlHelper htmlHelper, <span class="keyword">bool</span> condition, <span class="keyword">string</span> viewName)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (condition)</span><br><span class="line">   &#123;</span><br><span class="line">       RenderPartialInternal(</span><br><span class="line">           htmlHelper.ViewContext,</span><br><span class="line">           htmlHelper.ViewDataContainer,</span><br><span class="line">           viewName,</span><br><span class="line">           htmlHelper.ViewData,</span><br><span class="line">           <span class="keyword">null</span>,</span><br><span class="line">           ViewEngines.Engines);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">PartialIf</span><span class="params">(<span class="keyword">this</span> HtmlHelper htmlHelper, <span class="keyword">bool</span> condition, <span class="keyword">string</span> viewName, ViewDataDictionary viewData)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (condition)</span><br><span class="line">   &#123;</span><br><span class="line">       RenderPartialInternal(</span><br><span class="line">           htmlHelper.ViewContext,</span><br><span class="line">           htmlHelper.ViewDataContainer,</span><br><span class="line">           viewName,</span><br><span class="line">           viewData,</span><br><span class="line">           <span class="keyword">null</span>,</span><br><span class="line">           ViewEngines.Engines);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">PartialIf</span><span class="params">(<span class="keyword">this</span> HtmlHelper htmlHelper, <span class="keyword">bool</span> condition, <span class="keyword">string</span> viewName, <span class="keyword">object</span> model)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (condition)</span><br><span class="line">   &#123;</span><br><span class="line">       RenderPartialInternal(</span><br><span class="line">           htmlHelper.ViewContext,</span><br><span class="line">           htmlHelper.ViewDataContainer,</span><br><span class="line">           viewName,</span><br><span class="line">           htmlHelper.ViewData,</span><br><span class="line">           model,</span><br><span class="line">           ViewEngines.Engines);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">PartialIf</span><span class="params">(<span class="keyword">this</span> HtmlHelper htmlHelper, <span class="keyword">bool</span> condition, <span class="keyword">string</span> viewName, <span class="keyword">object</span> model, ViewDataDictionary viewData)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (condition)</span><br><span class="line">   &#123;</span><br><span class="line">       RenderPartialInternal(</span><br><span class="line">           htmlHelper.ViewContext,</span><br><span class="line">           htmlHelper.ViewDataContainer,</span><br><span class="line">           viewName,</span><br><span class="line">           viewData,</span><br><span class="line">           model,</span><br><span class="line">           ViewEngines.Engines);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>And here is the helper method I have used in the about extension ( most of the code snippet is taken from the MVC method <code>Html.Renderpartial(…)</code>, thanks to open source )</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">internal</span> <span class="keyword">static</span> IView <span class="title">FindPartialView</span><span class="params">(ViewContext viewContext, <span class="keyword">string</span> partialViewName, ViewEngineCollection viewEngineCollection)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = viewEngineCollection.FindPartialView(viewContext, partialViewName);</span><br><span class="line">    <span class="keyword">if</span> (result != <span class="keyword">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (result.View != <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> result.View;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="string">"Partial view not found"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">internal</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">RenderPartialInternal</span><span class="params">(ViewContext viewContext, IViewDataContainer viewDataContainer, <span class="keyword">string</span> partialViewName, ViewDataDictionary viewData, <span class="keyword">object</span> model, ViewEngineCollection viewEngineCollection)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (String.IsNullOrEmpty(partialViewName))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ArgumentException(<span class="string">"PartialViewName can't be empty or null."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ViewDataDictionary newViewData = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (model == <span class="keyword">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        newViewData = viewData == <span class="keyword">null</span> ? <span class="keyword">new</span> ViewDataDictionary(viewDataContainer.ViewData) : <span class="keyword">new</span> ViewDataDictionary(viewData);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        newViewData = viewData == <span class="keyword">null</span> ? <span class="keyword">new</span> ViewDataDictionary(model) : <span class="keyword">new</span> ViewDataDictionary(viewData) &#123; Model = model &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> newViewContext = <span class="keyword">new</span> ViewContext(viewContext, viewContext.View, newViewData, viewContext.TempData);</span><br><span class="line">    <span class="keyword">var</span> view = FindPartialView(newViewContext, partialViewName, viewEngineCollection);</span><br><span class="line">    view.Render(newViewContext, viewContext.HttpContext.Response.Output);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Hope this helps</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2010/01/21/ASP-Net-MVC-Conditional-Rendering-Partial-Views/" data-id="ci9e0wvnb0013y4ktchvs872y" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2010/01/21/ASP-Net-MVC-Conditional-Rendering-Partial-Views/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ASP-Net-MVC-Conditional-Rendering" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2010/01/03/ASP-Net-MVC-Conditional-Rendering/" class="article-date">
  <time datetime="2010-01-03T05:45:15.000Z" itemprop="datePublished">2010-01-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2010/01/03/ASP-Net-MVC-Conditional-Rendering/">ASP.Net MVC - Conditional Rendering</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>We come across situations like rendering elements based on the conditions in Model. For example, in the view if we want to show a TextBox if some property is true. A normal way of doing this is like below</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="preprocessor">%</span> <span class="keyword">if</span> <span class="comment">(this.Model.Exists)</span> &#123; <span class="preprocessor">%</span>&gt;</span><br><span class="line">      &lt;<span class="preprocessor">%</span>= Html.TextBox<span class="comment">("Test")</span> <span class="preprocessor">%</span>&gt;</span><br><span class="line">&lt;<span class="preprocessor">%</span> &#125; <span class="preprocessor">%</span>&gt;</span><br></pre></td></tr></table></figure>
<p>This looks like old classic asp style, and when it comes to code maintenance this will be a pain. So a clean way is to use an Html helper to generate this</p>
<p><code>&lt;%= Html.If(this.Model.Exists, action =&gt; action.TextBox(&quot;Name&quot;)) %&gt;</code></p>
<p>which looks cleaner than the old one. Source code for this helper method is</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="title">If</span><span class="params">(<span class="keyword">this</span> HtmlHelper htmlHelper, <span class="keyword">bool</span> condition, Func&lt;HtmlHelper, <span class="keyword">string</span>&gt; action)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (condition)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> action.Invoke(htmlHelper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">string</span>.Empty;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>What about IfElse condition, we could write another helper method for that</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="title">IfElse</span><span class="params">(<span class="keyword">this</span> HtmlHelper htmlHelper, <span class="keyword">bool</span> condition, Func&lt;HtmlHelper, <span class="keyword">string</span>&gt; trueAction, Func&lt;HtmlHelper, <span class="keyword">string</span>&gt; falseAction)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (condition)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> trueAction.Invoke(htmlHelper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> falseAction.Invoke(htmlHelper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Ok, now we got a conditionally rendered element, sometimes we may have to put a wrapper around this element. So I have written another Html helper method which will help you to put any html element around a particular element.</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="title">HtmlTag</span><span class="params">(<span class="keyword">this</span> HtmlHelper htmlHelper, HtmlTextWriterTag tag, <span class="keyword">object</span> htmlAttributes, Func&lt;HtmlHelper, <span class="keyword">string</span>&gt; action)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> attributes = <span class="keyword">new</span> RouteValueDictionary(htmlAttributes);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">using</span> (<span class="keyword">var</span> sw = <span class="keyword">new</span> StringWriter())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">using</span> (<span class="keyword">var</span> htmlWriter = <span class="keyword">new</span> HtmlTextWriter(sw))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// Add attributes</span></span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> attribute <span class="keyword">in</span> attributes)</span><br><span class="line">            &#123;</span><br><span class="line">                htmlWriter.AddAttribute(attribute.Key, attribute.Value != <span class="keyword">null</span> ? attribute.Value.ToString() : <span class="keyword">string</span>.Empty);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            htmlWriter.RenderBeginTag(tag);</span><br><span class="line">            htmlWriter.Write(action.Invoke(htmlHelper));</span><br><span class="line">            htmlWriter.RenderEndTag();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sw.ToString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">string</span>.Empty;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>An overloaded version which doesn’t accept <code>HtmlAttributes</code> as parameter</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="title">HtmlTag</span><span class="params">(<span class="keyword">this</span> HtmlHelper htmlHelper, HtmlTextWriterTag tag, Func&lt;HtmlHelper, <span class="keyword">string</span>&gt; action)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> HtmlTag(htmlHelper, tag, <span class="keyword">null</span>, action);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Below are some examples of using these helpers.</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">&lt;%= Html.HtmlTag(HtmlTextWriterTag.Div, action =&gt;</span> action.ActionLink(<span class="string">"Without attributes"</span>,<span class="string">"About"</span>) ) %&gt;</span><br><span class="line"></span><br><span class="line"><span class="variable">&lt;%= Html.HtmlTag(HtmlTextWriterTag.Div, new &#123; name = "wrapper", @class = "styleclass" &#125;, action =&gt;</span> action.ActionLink(<span class="string">"With Attributes"</span>, <span class="string">"About"</span>)) %&gt;</span><br><span class="line"></span><br><span class="line"><span class="variable">&lt;%= Html.HtmlTag(HtmlTextWriterTag.Div, null, action =&gt;</span> action.ActionLink(<span class="string">"Null attributes"</span>, <span class="string">"About"</span>)) %&gt;  </span><br><span class="line"></span><br><span class="line"><span class="variable">&lt;%= Html.IfElse(this.Model.Exists, trueAction =&gt;</span> trueAction.Encode(<span class="string">"Sample"</span>), falseAction =&gt; falseAction.TextBox(<span class="string">"SampleName"</span>)) %&gt;</span><br><span class="line"></span><br><span class="line"><span class="variable">&lt;%--</span><br><span class="line">Nesting</span><br><span class="line">&lt;div&gt;</span></span><br><span class="line">   <span class="variable">&lt;span&gt;</span></span><br><span class="line">       <span class="variable">&lt;a href="/Home/About"&gt;</span>About<span class="variable">&lt;/a&gt;</span></span><br><span class="line">   <span class="variable">&lt;/span&gt;</span></span><br><span class="line"><span class="variable">&lt;/div&gt;</span></span><br><span class="line">--%&gt;</span><br><span class="line"><span class="variable">&lt;%= Html.If(this.Model.Exists,</span><br><span class="line">    div =&gt;</span> div.HtmlTag(HtmlTextWriterTag.Div,</span><br><span class="line">        span =&gt; span.HtmlTag(HtmlTextWriterTag.Span,</span><br><span class="line"><span class="built_in">anchor</span> =&gt; <span class="built_in">anchor</span>.ActionLink(<span class="string">"About"</span>, <span class="string">"About"</span>))</span><br><span class="line">)) %&gt;</span><br></pre></td></tr></table></figure>
<p>Hope this will help you.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2010/01/03/ASP-Net-MVC-Conditional-Rendering/" data-id="ci9e0wvn80012y4ktw7gfy2g3" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2010/01/03/ASP-Net-MVC-Conditional-Rendering/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-FluentConfigurationException-An-invalid-or-Incomplete-Configuration-was-used-while-creating-Session-Factory" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2010/01/01/FluentConfigurationException-An-invalid-or-Incomplete-Configuration-was-used-while-creating-Session-Factory/" class="article-date">
  <time datetime="2010-01-01T05:34:13.000Z" itemprop="datePublished">2010-01-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2010/01/01/FluentConfigurationException-An-invalid-or-Incomplete-Configuration-was-used-while-creating-Session-Factory/">FluentConfigurationException: An invalid or Incomplete Configuration was used while creating Session Factory</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>I got this exception when I tried to run my Repository tests and couldn’t find the exact reason why these tests failed.</p>
<p>All the unit tests where passing before I removed the default constructors from Domain Model, when I reverted the default constructors back, everything started working again….. !!!</p>
<p>Do you know the exact reason for this?</p>
<p><strong>Update:</strong> In order to support lazy loading, NHibernate needs to create proxy objects. Those proxy classes derived from the actual domain model class itself, and they are instantiated using the default constructor. So the parent class also should have a default constructor.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2010/01/01/FluentConfigurationException-An-invalid-or-Incomplete-Configuration-was-used-while-creating-Session-Factory/" data-id="ci9e0wvk9000py4ktx5hhnjhp" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2010/01/01/FluentConfigurationException-An-invalid-or-Incomplete-Configuration-was-used-while-creating-Session-Factory/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Comet-a-k-a-Server-Pushing" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2009/12/20/Comet-a-k-a-Server-Pushing/" class="article-date">
  <time datetime="2009-12-20T05:20:23.000Z" itemprop="datePublished">2009-12-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2009/12/20/Comet-a-k-a-Server-Pushing/">Comet a.k.a Server Pushing</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Have you ever thought about how chatting in Gmail works? I think it works using a programming technique called <code>Comet</code>.</p>
<p>What is comet programming</p>
<blockquote><p>In web development, Comet is a neologism to describe a web application model in which a long-held HTTP request allows a web server to push data to a browser, without the browser explicitly requesting it. Comet is an umbrella term for multiple techniques for achieving this interaction. All these methods rely on features included by default in browsers, such as JavaScript, rather than on non-default plugins</p>
<footer><strong>Wikipedia</strong></footer></blockquote>
<p>Last few days, I was reading about this technology and thought about sharing the information with you all. Please find the attached sample application which demonstrates how comet works using Asp.Net (Note: Right now it works only in firefox. Fixes or patches to make it work in IE/Safari.. or all the browsers in this world are welcome J )</p>
<blockquote>
<p>Please download the demo from <a href="http://cdn.rajeeshcv.com/download/Comet.zip" target="_blank" rel="external">here</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2009/12/20/Comet-a-k-a-Server-Pushing/" data-id="ci9e0wvly000uy4kt4j0yemin" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2009/12/20/Comet-a-k-a-Server-Pushing/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Tip-for-Writing-Better-NUnit-Test-Cases" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2009/12/18/Tip-for-Writing-Better-NUnit-Test-Cases/" class="article-date">
  <time datetime="2009-12-18T05:13:04.000Z" itemprop="datePublished">2009-12-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2009/12/18/Tip-for-Writing-Better-NUnit-Test-Cases/">Tip for Writing Better NUnit Test Cases</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>If you have method, which does the string reverse. So normally we writes test cases in Nunit something like this</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[Test]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TestCase1</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">  ExString exString = <span class="keyword">new</span> ExString();</span><br><span class="line">  Assert.AreEqual(<span class="string">"dcba"</span>, exString.Reverse(<span class="string">"abcd"</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[Test]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TestCase2</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">  ExString exString = <span class="keyword">new</span> ExString();</span><br><span class="line">  Assert.AreEqual(<span class="string">"abba"</span>, exString.Reverse(<span class="string">"abba"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This means, you are repeating the same code again and again in order to test different possibilities. The down side of this approach is, in long run it will be very difficult to manage the test case when compared to the actual code.</p>
<p>To solve this particular problem NUnit has got parameterised test cases attribute, so the same could be re write above test case to</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[TestCase(<span class="string">"abcd"</span>, <span class="string">"dcba"</span>, TestName = <span class="string">"Test Case 1"</span>)]</span><br><span class="line">[TestCase(<span class="string">"abcd1"</span>, <span class="string">"1dcba"</span>, TestName = <span class="string">"Test Case 2"</span>)]</span><br><span class="line">[TestCase(<span class="string">"aaaa"</span>, <span class="string">"aaaa"</span>, TestName = <span class="string">"Test Case 3"</span>)]</span><br><span class="line">[TestCase(<span class="string">"abba"</span>, <span class="string">"abba"</span>, TestName = <span class="string">"Test Case 4"</span>)]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Can_Reverse_A_Text</span><span class="params">(<span class="keyword">string</span> actual, <span class="keyword">string</span> expected)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">  ExString exString = <span class="keyword">new</span> ExString();</span><br><span class="line">  Assert.AreEqual(expected, exString.Reverse(actual));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This gives a clean way for testing different possibilities, all these shown in the NUnit test runner as different test cases like below.</p>
<p><img src="http://cdn.rajeeshcv.com/images/2009/12/image-thumb.png" alt="NUnit Screenshot"></p>
<p>Hope this will help in some way or other</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2009/12/18/Tip-for-Writing-Better-NUnit-Test-Cases/" data-id="ci9e0wvi00008y4kt7ju9svfl" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2009/12/18/Tip-for-Writing-Better-NUnit-Test-Cases/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Inline-Editing-Using-JQuery" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2009/06/25/Inline-Editing-Using-JQuery/" class="article-date">
  <time datetime="2009-06-25T04:52:25.000Z" itemprop="datePublished">2009-06-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2009/06/25/Inline-Editing-Using-JQuery/">Inline Editing Using JQuery</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Here I wanted to show you the flexibility of JQuery. Below is a HTML code that generates a grid with two rows and ten columns.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"column"</span>&gt;</span>1<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"column"</span>&gt;</span>2<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"column"</span>&gt;</span>3<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"column"</span>&gt;</span>4<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"column"</span>&gt;</span>5<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"column"</span>&gt;</span>6<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"column"</span>&gt;</span>7<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"column"</span>&gt;</span>8<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"column"</span>&gt;</span>9<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"column"</span>&gt;</span>10<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>When the user double clicks on any of the cell, he can edit that content. The cell value get updated when user double clicks on any other cell.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    $(<span class="string">"#container .column"</span>).dblclick(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> content = $(<span class="keyword">this</span>).text();</span><br><span class="line">        <span class="keyword">var</span> width = $(<span class="keyword">this</span>).width() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">var</span> height = $(<span class="keyword">this</span>).height() - <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> $editbox = $(<span class="string">"&lt;input type='text'"</span> +</span><br><span class="line">            <span class="string">"style='width:"</span> + width + <span class="string">";"</span> +</span><br><span class="line">            <span class="string">"height:"</span> + height + <span class="string">";"</span> +</span><br><span class="line">            <span class="string">"border:none"</span> +</span><br><span class="line">            <span class="string">"' value='"</span> + content + <span class="string">"' /&gt;"</span>);</span><br><span class="line"></span><br><span class="line">        $(<span class="keyword">this</span>).empty();</span><br><span class="line">        $(<span class="keyword">this</span>).prepend($editbox);</span><br><span class="line">        $editbox.focus();</span><br><span class="line">        $editbox.select();</span><br><span class="line"></span><br><span class="line">        $($editbox).bind(<span class="string">"blur"</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            content = $(<span class="keyword">this</span>).val();</span><br><span class="line">            <span class="keyword">var</span> parent = $(<span class="keyword">this</span>).parent();</span><br><span class="line">            parent.html(content);</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>The above code does all the trick. First we hook the <code>Double Click</code> event to all the DIV with class name <code>column</code> using this <code>$(&quot;#container .column&quot;).dblclick(function(){...});</code> Inside that, we dynamically add a textbox inside the DIV and set its text value as the HTML content of the parent DIV. And also we bind the <code>blur</code> event of this texbox to a function, so that whenever the focus leaves from the textbox, that function is called. Then inside that function, we set the HTML content of the DIV with the Textbox value.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$($editbox).bind(<span class="string">"blur"</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     content = $(<span class="keyword">this</span>).val();</span><br><span class="line">     <span class="keyword">var</span> parent = $(<span class="keyword">this</span>).parent();</span><br><span class="line">     parent.html(content);</span><br><span class="line"></span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>
<p>See the working demo below</p>
<iframe width="100%" height="300" src="http://jsfiddle.net/s7jz6qbn/embedded/js,resources,html,css,result/light" frameborder="0" allowfullscreen></iframe>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2009/06/25/Inline-Editing-Using-JQuery/" data-id="ci9e0wvju000ly4kt2umg1m0a" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2009/06/25/Inline-Editing-Using-JQuery/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Code-Generation-Easy-Way" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2009/06/05/Code-Generation-Easy-Way/" class="article-date">
  <time datetime="2009-06-04T20:14:41.000Z" itemprop="datePublished">2009-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2009/06/05/Code-Generation-Easy-Way/">Code Generation - Easy Way</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Recently I read about Text <a href="http://msdn2.microsoft.com/en-us/library/bb126445.aspx" target="_blank" rel="external">Template Transformation Toolkit</a>(T4), I was really amazed by this because I thought only CodeDOM was the only way to generate code.</p>
<blockquote>
<p>T4 is a template based code generation engine which comes with Visual Studio 2008 (It is not a framework feature).</p>
</blockquote>
<p>This simple example shows how powerful it is -</p>
<p>if you have a string array and you want to generate a strongly typed <code>enum</code> from this.</p>
<h3 id="Steps">Steps</h3><p>1) Open up VS 2008 and Create a project.<br>2) Add a file called “EnumGenerator.tt” to the project. Accept the warning when add this file. Paste these code into the file you have created right now.</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="preprocessor">#@ template language="C#" hostspecific="True" debug="True" #&gt;</span></span><br><span class="line">&lt;<span class="preprocessor">#@ output extension="cs" #&gt;</span></span><br><span class="line">&lt;<span class="preprocessor">#</span></span><br><span class="line">  <span class="keyword">string</span>[] values = <span class="keyword">new</span> <span class="keyword">string</span>[]&#123;<span class="string">"Red"</span>,<span class="string">"Green"</span>,<span class="string">"Blue"</span>&#125;;</span><br><span class="line"><span class="preprocessor">#&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">TextTemplate</span> &#123;</span><br><span class="line">&lt;<span class="preprocessor">#</span></span><br><span class="line">  PushIndent(<span class="string">"\t"</span>);</span><br><span class="line"><span class="preprocessor">#&gt;</span></span><br><span class="line"><span class="keyword">enum</span> Color &#123;</span><br><span class="line">  &lt;<span class="preprocessor">#</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; values.Length; i++)</span><br><span class="line">    &#123;</span><br><span class="line">      PushIndent(<span class="string">"\t"</span>);</span><br><span class="line">      WriteLine(values[i] + ((i != values.Length -<span class="number">1</span>) ? <span class="string">","</span> : <span class="string">""</span>));</span><br><span class="line">      PopIndent();</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="preprocessor">#&gt;</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="preprocessor">#</span></span><br><span class="line">  PopIndent();</span><br><span class="line"><span class="preprocessor">#&gt;</span></span><br></pre></td></tr></table></figure>
<p>3) Done! Click the plus sign near the <code>EnumGenerator.tt</code>, you can see the source code.</p>
<p>The beauty of this technique is, it is not runtime or compile time. The code is generated at design time which allow you to use this enum(or whatever code you have generated) at the same time you write your code.</p>
<p>To learn more about this, here is the great link - <a href="http://www.olegsych.com/2007/12/text-template-transformation-toolkit/" target="_blank" rel="external">http://www.olegsych.com/2007/12/text-template-transformation-toolkit/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2009/06/05/Code-Generation-Easy-Way/" data-id="ci9e0wvm2000vy4ktfvy998qf" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2009/06/05/Code-Generation-Easy-Way/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08/">August 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/12/">December 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/11/">November 2011</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/10/">October 2011</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04/">April 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/02/">February 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/12/">December 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/09/">September 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/06/">June 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/04/">April 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/02/">February 2010</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/01/">January 2010</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/12/">December 2009</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/06/">June 2009</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/05/">May 2009</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/10/">October 2008</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/06/">June 2008</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/05/">May 2008</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2014/06/22/EmberJS-Error-Logging-in-Production/">EmberJS Error Logging in Production</a>
          </li>
        
          <li>
            <a href="/2014/06/12/EmberJS-How-to-Detect-User-Inactivity/">EmberJS - How to Detect User Inactivity</a>
          </li>
        
          <li>
            <a href="/2013/08/03/Visual-Studio-Debugging-Silverlight-Application-with-Chrome-and-Firefox/">Visual Studio : Debugging Silverlight Application with Chrome and Firefox</a>
          </li>
        
          <li>
            <a href="/2012/12/06/One-of-the-Top-E-Commerce-Website-in-India-Stores-Passwords-Incorrectly/">One of the Top E-Commerce Website in India Stores Passwords Incorrectly</a>
          </li>
        
          <li>
            <a href="/2012/12/01/Automating-WYSIWYG-Editors-using-Selenium-Web-Driver/">Automating WYSIWYG Editors using Selenium Web Driver</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 Rajeesh C V<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
    <a href="/projects" class="mobile-nav-link">Projects</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'rajeeshcv';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>