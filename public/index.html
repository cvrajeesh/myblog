<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>rajeesh</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="rajeesh">
<meta property="og:url" content="http://rajeeshcv.com/index.html">
<meta property="og:site_name" content="rajeesh">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="rajeesh">
<meta name="twitter:description">
<meta name="twitter:creator" content="@cvrajeesh">
<link rel="publisher" href="https://www.google.com/+RajeeshCV">
  
    <link rel="alternative" href="/atom.xml" title="rajeesh" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-647217-9', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">rajeesh</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Sharing My Thoughts</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
          <a class="main-nav-link" href="/projects">Projects</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://rajeeshcv.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Build-Parsers-using-PEG-js" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/13/Build-Parsers-using-PEG-js/" class="article-date">
  <time datetime="2015-10-13T09:11:03.000Z" itemprop="datePublished">2015-10-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/13/Build-Parsers-using-PEG-js/">Build Parsers using PEG.js</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Writing parser from scratch is a tedious task. Recently I came across a simple parser generator for JavaScript called <a href="http://pegjs.org/" target="_blank" rel="external">PEG.js</a></p>
<blockquote><p>PEG.js is a simple parser generator for JavaScript that produces fast parsers with excellent error reporting. You can use it to process complex data or computer languages and build transformers, interpreters, compilers and other tools easily.</p>
<footer><strong>from official website</strong><cite><a href="http://pegjs.org/" target="_blank" rel="external">pegjs.org</a></cite></footer></blockquote>
<p>In order to create a parser, provide a grammar as the input and <a href="http://pegjs.org/" target="_blank" rel="external">PEG.js</a> will build a parser for that grammar. Then that generated parser can be used to parse the content.</p>
<p><a href="http://pegjs.org/" target="_blank" rel="external">PEG.js</a> grammar has a particular syntax, you can learn more about it from <a href="http://pegjs.org/documentation#grammar-syntax-and-semantics" target="_blank" rel="external">http://pegjs.org/documentation#grammar-syntax-and-semantics</a>. If you are familiar with regular expression it will easy understand.</p>
<p>Take a simple example for writing grammar which will parse texts like “$100”, “$150” etc… </p>
<p>Example text follow a pattern where currency symbol i.e. “$” is followed by a number. Translating this into <a href="http://pegjs.org/" target="_blank" rel="external">pEG.js</a> grammar looks like this</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Text&#10; = &#34;$&#34; Number&#10;&#10;Number&#10; = Digit+&#10;&#10;Digit&#10; = [0-9]</span><br></pre></td></tr></table></figure>
<p>Every grammar has set of <em>rules</em>, in this case we have three rules. Every rule has a <em>name</em> that identify the rule and a parsing expression. Rule name is followed by “=” then parsing expression.</p>
<ol>
<li>Rule <strong>Text</strong><br>  Parsing expression for this rule is <em>“$” Number</em>. This parsing expression says “Match text that has literal “$” followed by a <em>Number</em>“. Note <em>Number</em> is name of a rule.</li>
<li>Rule <strong>Number</strong><br> Parsing expression “Digit+” means - match text that has one or more <em>Digit</em>.</li>
<li>Rule <strong>Digit</strong><br> Last rule says match any character that is between 0 to 9</li>
</ol>
<p>Hope you got basic idea how a grammar is created. <a href="http://pegjs.org/" target="_blank" rel="external">PEG.js</a> provides playground where you can try your grammar and see how it is working. To try this go to <a href="http://pegjs.org/online" target="_blank" rel="external">http://pegjs.org/online</a> and copy paste the grammar we have created on text box 1 and enter “$100” on text box 2. Parsed result will be shown on the <em>output</em> section and it looks like this</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">   <span class="string">"$"</span>,</span><br><span class="line">   [</span><br><span class="line">      <span class="string">"1"</span>,</span><br><span class="line">      <span class="string">"0"</span>,</span><br><span class="line">      <span class="string">"0"</span></span><br><span class="line">   ]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><a href="http://pegjs.org/" target="_blank" rel="external">PEG.js</a> was able to parse successfully, if you provide an invalid input like “$100$” it will show a parser error. </p>
<p>Note if you want to just get the value from that text (“100” from “$100”), the output that we got is not that useful. In order extract only the required values, parsing expression allows to write custom JavaScript expressions inside the curly braces (“{“ and “}”). Updating <em>rule</em> <strong>Text</strong> like below will return just the value “100”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Text&#10; = &#34;$&#34; n:Number&#10; &#123; return n.join(&#34;&#34;); &#125;</span><br></pre></td></tr></table></figure>
<p>Two changes we have made to the previous <em>rule</em></p>
<ol>
<li><strong>n:</strong>number - added a prefix <strong><em>n</em></strong> to <em>rule</em> <strong>Number</strong><br> Here we are assigning the match result of <em>rule</em> <strong>Number</strong> to a variable called <strong><em>n</em></strong></li>
<li><code>{ return n.join(&quot;&quot;); }</code><br> JavaScript statement inside the curly brace call <code>join</code> method on the variable <strong><em>n</em></strong>. In this case variable <strong><em>n</em></strong> contains an array of characters, so calling <code>join</code> on that will concatenate and produce a string which returned as the result of <em>rule</em> <strong>Text</strong></li>
</ol>
<h2 id="Parsing_Grocery_List">Parsing Grocery List</h2><p>Take some more complex example where you want to parse grocery list and return the result in a JSON format like below where quantity should be in grams</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line"> &#123; "<span class="attribute">name</span>": <span class="value"><span class="string">"Onion"</span></span>, "<span class="attribute">quantity</span>": <span class="value"><span class="number">1000</span> </span>&#125;,</span><br><span class="line"> &#123; "<span class="attribute">name</span>": <span class="value"><span class="string">"Tomatoes"</span></span>, "<span class="attribute">quantity</span>": <span class="value"><span class="number">500</span> </span>&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>Grocery list text will be in the following format - where the quantity can be in <em>kg</em> or <em>gm</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Onion 1kg&#10;Tomatoes 500gm&#10;Beans 1kg</span><br></pre></td></tr></table></figure>
<p>Please try for yourself and share your grammar. </p>
<p>Here is the grammar I have created to do this; Below JsFiddle is interactive you can change grammar and grocery list, clicking on <strong>Parse</strong> button will show the result.</p>
<iframe width="100%" height="675" src="http://jsfiddle.net/1u0ug5wd/embedded/result/light" frameborder="0" allowfullscreen></iframe>
<p>Hope this article was helpful. Please share your thoughts and comments.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2015/10/13/Build-Parsers-using-PEG-js/" data-id="cifp5fhha0000zokt0rp3e9y6" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2015/10/13/Build-Parsers-using-PEG-js/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-A-Different-Way-to-Organize-JavaScripts-in-ASP-Net-MVC" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/07/A-Different-Way-to-Organize-JavaScripts-in-ASP-Net-MVC/" class="article-date">
  <time datetime="2015-10-07T15:27:54.000Z" itemprop="datePublished">2015-10-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/07/A-Different-Way-to-Organize-JavaScripts-in-ASP-Net-MVC/">A Different Way to Organize JavaScripts in ASP.Net MVC</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>New JavaScript SPA(Single Page Application) frameworks are getting written day by day, generally one core feature these frameworks solves is how to organizing the code so that maintaining it in the future won’t be a night mare. When it comes to organizing JavaScripts in a large scale server side application, resources available is very less SPA frameworks.</p>
<p>Organizing JavaScripts in a server side application is entirely different from SPA, most of the articles that I came across is suggesting to include page level script inside the server side page itself - e.g. in ASP.Net MVC you include common JavaScript files inside the layout file and views will include the scripts it required</p>
<p><strong>Layout(_Layout.cshtml)</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">  .....</span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">    ......</span><br><span class="line">    @Scripts.Render("~/bundles/commonjs")</span><br><span class="line">    @RenderSection("scripts", required: false)</span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><strong>View(Index.cshml)</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line">@section Scripts &#123;</span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"~/....."</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>For large applications a page will have different components which requires it’s own set of JavaScript files in order work. Including and organizing these component level scripts and it’s dependencies can cause lot of issues.</p>
<p>So here I want explain a different approach which I am not going to claim is best optimal solution for all applications but I think it does work for majority of the applications.</p>
<p>In this article I am using <a href="http://www.typescriptlang.org/" target="_blank" rel="external">TypeScript</a> instead of JavaScript. If you don’t know about <a href="http://www.typescriptlang.org/" target="_blank" rel="external">TypeScript</a> it’s a typed superset of JavaScript, learn more about it from  <a href="http://www.typescriptlang.org/" target="_blank" rel="external">http://www.typescriptlang.org</a></p>
<h2 id="Application_Class">Application Class</h2><p>Application is a TypeScript class which is the main entry point to client side script, this class is responsible for initializing page component. This is done by reading <code>data-js-component</code> attribute on body, then import the component dynamically and initialize.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component &#125; from <span class="string">"Component"</span></span><br><span class="line"><span class="keyword">import</span> * as Utils from <span class="string">"Utils"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> Application &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> initialize(): <span class="built_in">void</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Get page component name</span></span><br><span class="line">        <span class="keyword">var</span> componentName = <span class="built_in">document</span>.body.dataset[<span class="string">"jsComponent"</span>];</span><br><span class="line">        <span class="keyword">if</span> (!componentName) &#123;</span><br><span class="line">            <span class="comment">// No page level component found</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.import(<span class="string">"Pages/"</span> + componentName)</span><br><span class="line">            .then((mod) =&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">typeof</span> mod[componentName] === <span class="string">"function"</span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> pageComponent = Utils.createInstance&lt;Component&gt;(mod[componentName], <span class="built_in">document</span>.body);</span><br><span class="line">                    pageComponent.initialize();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In order to load the component dynamically I am using a module loader called <a href="https://github.com/systemjs/systemjs" target="_blank" rel="external">SystemJS</a>, line 15 shows dynamically importing a page component. Once the component is imported it’s <code>initialize()</code> method is called after creating an instance of that component. One of the main advantage of using a module loader here is it will manage the dependencies which means any dependent modules will be imported automatically.</p>
<p>Every page will have a corresponding page component, name of this page level component is set as a <code>data-js-component</code> attribute on the body tag. Page component name is generated based on a convention - it will be same as the controller name. e.g. component name for <code>CustomerController</code> will be <code>Customer</code>. All page level components resides in a separate directory called <em>Pages</em>.</p>
<p>I have created a Html helper extension method which will return controller name, it also provide flexibility where an action method could change the page component name using a view data <code>jsComponent</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;body data-js-component=&#34;@Html.JsPage()&#34;&#62;&#10;    ......&#10;&#60;/body&#62;</span><br></pre></td></tr></table></figure>
<p>Helper extension<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> MvcHtmlString <span class="title">JsPage</span>(<span class="params"><span class="keyword">this</span> HtmlHelper helper</span>)</span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> pageNameViewData = helper.ViewContext.ViewData[<span class="string">"JsComponent"</span>];</span><br><span class="line">    <span class="keyword">var</span> pageName = pageNameViewData != <span class="keyword">null</span></span><br><span class="line">                       ? pageNameViewData.ToString()</span><br><span class="line">                       : helper.ViewContext.RouteData.GetRequiredString(<span class="string">"controller"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> MvcHtmlString(pageName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Component">Component</h2><p>All page level components derive from a base class <code>Component</code>, this base class implements the core initialization logic. Component can have child components as well, so initializing parent component will initialize child components as well. When <code>Application</code> class initializes page component, then any child components will also get initialized. <code>OnReady</code> method on the component is called after initialization is completed.</p>
<p><code>Component</code> is associated with an HTML element on which the component is going to act up on. This container element is passed as a constructor argument. Page level component is initialized with body as associated element.</p>
<p><strong>Component Class</strong><br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> Component &#123;</span><br><span class="line"></span><br><span class="line">    ....</span><br><span class="line"></span><br><span class="line">    <span class="constructor"><span class="keyword">constructor</span>(private element: HTMLElement) </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">get</span> container() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.element;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">get</span> componentName() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.container.dataset[<span class="string">"jsComponent"</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> initialize(): Promise&lt;<span class="built_in">any</span>&gt; &#123;</span><br><span class="line">        ......</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> onReady() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ....    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>Home page component</strong><br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component &#125; from <span class="string">"Component"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> Home extends Component &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Child_Components">Child Components</h2><p>A page will have many child components as well. To create these child component element associated with that component should have a <code>data-js-component</code> attribute.</p>
<p>Below code shows <code>Popover</code> component which initializes the bootstrap popover </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component &#125; from <span class="string">"Component"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> Popover extends Component &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> onReady() &#123;</span><br><span class="line">        $(<span class="keyword">this</span>.container).popover(&#123;</span><br><span class="line">            content: <span class="string">"Popover Component"</span>,</span><br><span class="line">            placement: <span class="string">"right"</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In order apply this in the razor view, I will be setting <code>data-js-component</code> attribute like below</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">a</span>  <span class="attribute">href</span>=<span class="value">"#"</span> </span><br><span class="line">    <span class="attribute">class</span>=<span class="value">"btn btn-primary btn-lg js-component"</span> </span><br><span class="line">    <span class="attribute">data-js-component</span>=<span class="value">"Popover"</span>&gt;</span></span><br><span class="line">    Learn more &amp;raquo;</span><br><span class="line"><span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="Connecting_the_dots">Connecting the dots</h2><p>Finally to wire up everything - <code>Application</code> class needs to initialized. For that import <code>Application</code> module in <strong>_Layout.cshtml</strong> and initialize it.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"~/Scripts/system.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">    System.config(&#123;</span><br><span class="line">        baseURL: <span class="string">'/Scripts/App'</span>,</span><br><span class="line">        defaultJSExtensions: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    System.<span class="keyword">import</span>(<span class="string">'Application'</span>)</span><br><span class="line">        .then(<span class="function"><span class="keyword">function</span> <span class="params">(m)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> app = <span class="keyword">new</span> m.Application();</span><br><span class="line">            app.initialize();</span><br><span class="line">        &#125;);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Source code used in this article can be found here <a href="https://github.com/cvrajeesh/myblogsamples/tree/master/MVC/PageScripts" target="_blank" rel="external">https://github.com/cvrajeesh/myblogsamples/tree/master/MVC/PageScripts</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2015/10/07/A-Different-Way-to-Organize-JavaScripts-in-ASP-Net-MVC/" data-id="cifm648d1000058ktrt1oitk6" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2015/10/07/A-Different-Way-to-Organize-JavaScripts-in-ASP-Net-MVC/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-How-to-Fill-Remaining-Height-with-a-Div" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/08/How-to-Fill-Remaining-Height-with-a-Div/" class="article-date">
  <time datetime="2015-05-08T06:56:23.000Z" itemprop="datePublished">2015-05-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/08/How-to-Fill-Remaining-Height-with-a-Div/">How to Fill Remaining Height with a Div</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Sometimes things are too obvious but don’t work the way we think.</p>
<p>This is the HTML I have; my requirement was <code>child1</code> height will be auto(based on the content) and <code>child2</code> will occupy the remaining height of the main-container.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"main-container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child1"</span>&gt;</span>Child1 contents<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child2"</span>&gt;</span>Child2 contents<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>First I thought this is easy and created the following styles<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.main-container</span> <span class="rules">&#123; <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">500px</span></span></span>;  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100%</span></span></span>; &#125;</span></span><br><span class="line"><span class="class">.child2</span> <span class="rules">&#123; <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100%</span></span></span>; &#125;</span></span><br></pre></td></tr></table></figure></p>
<p>This produces a wrong result - if <code>child1</code> takes 100px I expected <code>child2</code> to be 400px, but the height was 500px.</p>
<p><img src="http://cdn.rajeeshcv.com/images/2015/Fill_height_div.PNG" alt="Child2 takes full height"></p>
<p>There are many ways to fix this. One easy way is using <code>display:table-row</code>. Here is fixed CSS</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.main-container</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">500px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100%</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">display</span>:<span class="value"> table</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.child1</span> <span class="rules">&#123; <span class="rule"><span class="attribute">display</span>:<span class="value"> table-row</span></span>; &#125;</span></span><br><span class="line"><span class="class">.child2</span> <span class="rules">&#123; <span class="rule"><span class="attribute">display</span>:<span class="value"> table-row</span></span>; <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100%</span></span></span>; &#125;</span></span><br></pre></td></tr></table></figure>
<p>see this in action below</p>
<iframe width="100%" height="300" src="http://jsfiddle.net/j2Lpehvf/embedded/html,css,result/light" frameborder="0" allowfullscreen></iframe>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2015/05/08/How-to-Fill-Remaining-Height-with-a-Div/" data-id="ciffni8t3000oiskt9gir812z" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2015/05/08/How-to-Fill-Remaining-Height-with-a-Div/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Run-Gulp-Tasks-in-a-Predefined-Order" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/07/Run-Gulp-Tasks-in-a-Predefined-Order/" class="article-date">
  <time datetime="2015-05-07T12:56:28.000Z" itemprop="datePublished">2015-05-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/07/Run-Gulp-Tasks-in-a-Predefined-Order/">Run Gulp Tasks in a Predefined Order</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://gulpjs.com/" target="_blank" rel="external">Gulp</a> is build automation tool which runs on top of Node. In my current project I had to execute set of tasks in a predefined order, in which some of the tasks can be run in parallel to improve the efficiency.</p>
<p>By default <a href="http://gulpjs.com/" target="_blank" rel="external">Gulp</a> runs all the tasks at the same time, so after googling I saw this official <a href="https://github.com/gulpjs/gulp/blob/master/docs/recipes/running-tasks-in-series.md" target="_blank" rel="external">article</a>. In this approach every task will takes a callback function so that Gulp knows when that task is completed. Then other task add this as a dependency</p>
<p>E.g. from the official article</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// takes in a callback so the engine knows when it'll be done</span></span><br><span class="line">gulp.task(<span class="string">'one'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// do stuff -- async or otherwise</span></span><br><span class="line">    <span class="comment">// if err is not null and not undefined, the orchestration will stop, and 'two' will not run</span></span><br><span class="line">    cb(err);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// identifies a dependent task must be complete before this one begins</span></span><br><span class="line">gulp.task(<span class="string">'two'</span>, [<span class="string">'one'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// task 'one' is done now</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'default'</span>, [<span class="string">'one'</span>, <span class="string">'two'</span>]);</span><br><span class="line"><span class="comment">// alternatively: gulp.task('default', ['two']);</span></span><br></pre></td></tr></table></figure>
<p>Here task <code>two</code> is depends on task <code>one</code>, so Gulp ensures that task <code>one</code> is completed before running task <code>two</code>.One drawback with this approach is tasks are tightly coupled to each other which reduces the flexibility if you want to change the order.</p>
<p>So I came across a plugin called <a href="https://www.npmjs.com/package/run-sequence" target="_blank" rel="external">run-sequence</a>, this plugin allows you to order the tasks much easy. We can re-write the first example like this</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</span><br><span class="line">    runSequence = <span class="built_in">require</span>(<span class="string">'run-sequence'</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'one'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Returning the stream is improtant</span></span><br><span class="line">  <span class="keyword">return</span> gulp.src(....)</span><br><span class="line">        .pipe(gulp.dest(....);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'two'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Returning the stream is improtant</span></span><br><span class="line">  <span class="keyword">return</span> gulp.src(....)</span><br><span class="line">        .pipe(gulp.dest(....);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'default'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    runsSequence(<span class="string">'one'</span>, <span class="string">'two'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>Caution</strong><br>Make sure each of the tasks returns a <code>stream</code></p>
<h3 id="Running_tasks_in_parallel">Running tasks in parallel</h3><p><a href="https://www.npmjs.com/package/run-sequence" target="_blank" rel="external">run-sequence</a> can do much more, like running in parallel</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'default'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    runsSequence(</span><br><span class="line">        <span class="string">'task-1'</span>,</span><br><span class="line">        <span class="string">'task-2'</span>,</span><br><span class="line">        [<span class="string">'task-3'</span>, <span class="string">'task-4'</span>, <span class="string">'task-5'</span>],</span><br><span class="line">        [<span class="string">'task-7'</span>, <span class="string">'task-8'</span>]</span><br><span class="line">      );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>The above one ensures that <code>task-1</code> and <code>task-2</code> will be running in series, after that <code>task-3</code>, <code>task-4</code>, <code>task-5</code> will run in parallel, then <code>task-7</code> and <code>task-8</code> are run in parallel as well.</p>
<p>Main advantage I see when compared to official documentation is - tasks are independent and orchestration is done by someone else.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2015/05/07/Run-Gulp-Tasks-in-a-Predefined-Order/" data-id="ciffni8s8000ciskt07q9v2c8" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2015/05/07/Run-Gulp-Tasks-in-a-Predefined-Order/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-EmberJS-Error-Logging-in-Production" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/06/22/EmberJS-Error-Logging-in-Production/" class="article-date">
  <time datetime="2014-06-22T07:22:57.000Z" itemprop="datePublished">2014-06-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/06/22/EmberJS-Error-Logging-in-Production/">EmberJS Error Logging in Production</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In order to log all errors in an <a href="http://emberjs.com/" target="_blank" rel="external">EmberJS</a> application, <a href="http://emberjs.com/" target="_blank" rel="external">EmberJS</a> provides a global hook called <code>onerror</code></p>
<p>Here is a link to the official documentation - <a href="http://emberjs.com/guides/understanding-ember/debugging/#toc_implement-an-ember-onerror-hook-to-log-all-errors-in-production" target="_blank" rel="external">http://emberjs.com/guides/understanding-ember/debugging/#toc_implement-an-ember-onerror-hook-to-log-all-errors-in-production</a></p>
<p>Code sample from the documentation (v 1.5.1) look like this</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Ember.onerror = <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">  Em.$.ajax(<span class="string">'/error-notification'</span>, &#123;</span><br><span class="line">    type: <span class="string">'POST'</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">      stack: error.stack,</span><br><span class="line">      otherInformation: <span class="string">'exception message'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>What this piece of code does is, whenever an error occurs that stack trace is send to the server using an AJAX request. This will works great for most of the scenarios but….</p>
<p>Consider a situation where an error occurs inside a mouse move event handler. Then you will be trying to sending hundreds of requests to server in short interval. This can bring down your server if not handled properly, it’s like <a href="http://en.wikipedia.org/wiki/Denial-of-service_attack" target="_blank" rel="external">DDOS</a>-ing your own server.</p>
<p>Good approach will be to control the rate at which errors are send to the server for logging. This can be done using a concept called Throttling - which ensures that the target method is never called more frequently than the specified period of time.</p>
<p>Google for JavaScript Throttling you can find lot different implementations. EmberJS also provide it’s own throttling function Ember.run.throttle</p>
<p>Here is the example from the official <a href="http://emberjs.com/" target="_blank" rel="external">EmberJS</a> website</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myFunc = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' ran.'</span>); &#125;;</span><br><span class="line"><span class="keyword">var</span> myContext = &#123;name: <span class="string">'throttle'</span>&#125;;</span><br><span class="line"></span><br><span class="line">Ember.run.throttle(myContext, myFunc, <span class="number">150</span>);</span><br><span class="line"><span class="comment">// myFunc is invoked with context myContext</span></span><br></pre></td></tr></table></figure>
<p>This <code>throttling</code> function can be used for sending errors to the server. Here is a working demo which shows the throttled error logging -<br><a href="http://cvrajeesh.github.io/emberjs/errorhandling.html" target="_blank" rel="external">http://cvrajeesh.github.io/emberjs/errorhandling.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2014/06/22/EmberJS-Error-Logging-in-Production/" data-id="ciffni8vd000tiskt1ehcsr02" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2014/06/22/EmberJS-Error-Logging-in-Production/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-EmberJS-How-to-Detect-User-Inactivity" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/06/12/EmberJS-How-to-Detect-User-Inactivity/" class="article-date">
  <time datetime="2014-06-12T07:17:49.000Z" itemprop="datePublished">2014-06-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/06/12/EmberJS-How-to-Detect-User-Inactivity/">EmberJS - How to Detect User Inactivity</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Scenario:</strong></p>
<p>I am working on a web application that has a Single Page Application module which is built using <a href="http://emberjs.com/" target="_blank" rel="external">EmberJS</a> framework.</p>
<p>This EmberJS application is a page designer where user can drag and drop items to the design surface and change properties of these items. Finally when the page is ready, he can save the changes back to server.</p>
<p><strong>Problem:</strong></p>
<p>Whenever a user works on the page designer for long period of time without saving the changes in between - finally when he try to save all of his changes in one shot, server side session was already timed out.</p>
<p><strong>Solution:</strong></p>
<p>Implemented an API on the server side which can refresh the session if this API is invoked.</p>
<p>So on the <a href="http://emberjs.com/" target="_blank" rel="external">EmberJS</a> application side we had to calculate how long a user not active. Then we can check for this inactivity time periodically and decide whether to refresh session or not.</p>
<p>An easy way to do it in EmberJS is by hooking to the <code>mousemove</code>, <code>keydown</code> events of the <code>ApplicationView</code>. Details can be found in the EmberJS documentation <a href="http://emberjs.com/api/classes/Ember.View.html#toc_responding-to-browser-events" target="_blank" rel="external">http://emberjs.com/api/classes/Ember.View.html#toc_responding-to-browser-events</a></p>
<p>Here is code sample which does this</p>
<p>First I am creating the application object with an additional property for tracking the last active time.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> App = Ember.Application.create(&#123;</span><br><span class="line">    lastActiveTime: <span class="literal">null</span>,</span><br><span class="line">    ready: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        App.lastActiveTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>After that, hook the events in which you are interested in <code>ApplicationView</code>, which will update the last active time defined in the application object.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">App.ApplicationView = Ember.View.extend(&#123;</span><br><span class="line">    templateName: <span class="string">'application'</span>,</span><br><span class="line"></span><br><span class="line">    mouseMove: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        App.lastActiveTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    touchStart: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        App.lastActiveTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    keyDown: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        App.lastActiveTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>In our case, I am interested on <code>mouseMove</code>, <code>touchStart</code> (for touch devices) and <code>keyDown</code> events. When they are getting fired I will update the last active time with current time.</p>
<p>Now you can use the last active time property to find out how long the user is active.</p>
<blockquote>
<p>Demo: <a href="http://cvrajeesh.github.io/emberjs/inactivity.html" target="_blank" rel="external">http://cvrajeesh.github.io/emberjs/inactivity.html</a></p>
</blockquote>
<p>This demo uses <a href="http://momentjs.com/" target="_blank" rel="external">moment.js</a> for calculating time difference as well as for formatting the time.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2014/06/12/EmberJS-How-to-Detect-User-Inactivity/" data-id="ciffni8uh000sisktshx1v052" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2014/06/12/EmberJS-How-to-Detect-User-Inactivity/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Visual-Studio-Debugging-Silverlight-Application-with-Chrome-and-Firefox" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/08/03/Visual-Studio-Debugging-Silverlight-Application-with-Chrome-and-Firefox/" class="article-date">
  <time datetime="2013-08-03T07:13:01.000Z" itemprop="datePublished">2013-08-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/08/03/Visual-Studio-Debugging-Silverlight-Application-with-Chrome-and-Firefox/">Visual Studio : Debugging Silverlight Application with Chrome and Firefox</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Here is a tip if you want to debug Silverlight applications from Visual Studio 2012 if it is running in Google Chrome or Firefox</p>
<p><strong>Google Chrome :</strong></p>
<ol>
<li>Run the application and select Debug –&gt; Attach to Process from the menu</li>
<li>From the Available Processes list, look for process named “chrome.exe” with type <em>Silverlight</em></li>
<li>Select that process and click the <em>Attach</em> button</li>
</ol>
<p>Here is screenshot from my machine<br><img src="http://cdn.rajeeshcv.com/images/2013/08/201308301039_chrome_silverlight_debugging.png" alt="Visual Studio attach to Silverlight in Chrome"></p>
<p><strong>Mozilla Firefox :</strong></p>
<p>Firefox has a slightly different approach</p>
<ol>
<li>Run the application and select Debug –&gt; Attach to Process from the menu</li>
<li>From the Available Processes list, look for process named <em>plugin-container.exe</em></li>
<li>Select that process and click the <em>Attach</em> button</li>
</ol>
<p>Here is the screenshot<br><img src="http://cdn.rajeeshcv.com/images/2013/08/201308301039_firefox_silverlight_debugging.png" alt="Visual Studio attach to Silverlight in Firefox"></p>
<p>Voila!!! now you are able to get the breakpoints in Visual Studio</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2013/08/03/Visual-Studio-Debugging-Silverlight-Application-with-Chrome-and-Firefox/" data-id="ciffni8rs0006isktlezumwg9" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2013/08/03/Visual-Studio-Debugging-Silverlight-Application-with-Chrome-and-Firefox/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-One-of-the-Top-E-Commerce-Website-in-India-Stores-Passwords-Incorrectly" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2012/12/06/One-of-the-Top-E-Commerce-Website-in-India-Stores-Passwords-Incorrectly/" class="article-date">
  <time datetime="2012-12-06T07:06:44.000Z" itemprop="datePublished">2012-12-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/12/06/One-of-the-Top-E-Commerce-Website-in-India-Stores-Passwords-Incorrectly/">One of the Top E-Commerce Website in India Stores Passwords Incorrectly</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This incident made me feel very bad – couple of weeks before I ordered a product from <a href="http://www.naaptol.com/" target="_blank" rel="external">naaptol</a> a well-known E-Commerce website in India.  It was the first time I was ordering something from them. So I had to register first, after the registration was completed got a confirm email from them</p>
<p><img src="http://cdn.rajeeshcv.com/images/2012/12/20121206105945_naaptolregistration.png" alt="Registration confirmation email from naaptol"></p>
<p>Oops!!! My password is in clear text.</p>
<p>I thought they might be generating the email during the registration process before it is stored in their database. Without bothering much, I ordered the item. Thought about investigating about the “clear text password” little bit, but somehow forgot it.</p>
<p>After few days when I got the product which I have ordered, it reminded me about this password incident. So in order see whether they are hashing my password or not, I used their <strong>Forgot my password</strong> option. It asked for my email address. After the submission got a message saying</p>
<blockquote>
<p>We’ have sent you an e-mail at the submitted ID including instructions. You’ll be back to your shopping place in no matter of time.</p>
</blockquote>
<p>As expected, got an email from them</p>
<p><img src="http://cdn.rajeeshcv.com/images/2012/12/20121206105945_naaptolforgotpassword.png" alt="Forgot my password email from naaptol"></p>
<p>It reads <em>Here is your new Login and Password</em> and surprisingly password they gave is same as my old password even though in the email it is mentioned that they are sending a new password. It confirmed that they are not hashing the passwords.</p>
<p>Will they be storing it in plain text? Who knows…</p>
<blockquote>
<p>Did someone tell you internet is not a good place to store your secrets?</p>
</blockquote>
<p>I tried to play a nice role, so sent them an email telling about about the password hashing problem. You know what happened… no reply from them till now.</p>
<p>If you are in the naaptol technical team, convince your boss about the importance of securing the password and push that functionality in the next release.</p>
<p>If you are a non-technical manager in naaptol, tell your developers to read this article from Jeff - <a href="http://www.codinghorror.com/blog/2007/09/youre-probably-storing-passwords-incorrectly.html" target="_blank" rel="external">You’re Probably Storing Passwords Incorrectly</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2012/12/06/One-of-the-Top-E-Commerce-Website-in-India-Stores-Passwords-Incorrectly/" data-id="ciffni8s8000diskt1qfd7ig5" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2012/12/06/One-of-the-Top-E-Commerce-Website-in-India-Stores-Passwords-Incorrectly/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Automating-WYSIWYG-Editors-using-Selenium-Web-Driver" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2012/12/01/Automating-WYSIWYG-Editors-using-Selenium-Web-Driver/" class="article-date">
  <time datetime="2012-12-01T06:58:23.000Z" itemprop="datePublished">2012-12-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/12/01/Automating-WYSIWYG-Editors-using-Selenium-Web-Driver/">Automating WYSIWYG Editors using Selenium Web Driver</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Automating web application using <a href="https://github.com/SeleniumHQ/selenium/wiki/Getting-Started" target="_blank" rel="external">selenium for acceptance/integration tests</a> is very easy. Recently I have faced few issues when automating a page with a JavaScript based <a href="http://en.wikipedia.org/wiki/WYSIWYG" target="_blank" rel="external">WYSIWYG</a> editors.</p>
<p>The reason why it is hard because most of these editors create a new editable HTML document inside an iframe. There are two ways I aware that you can set text on these editors</p>
<ol>
<li>Executing a JavaScript code in the current page</li>
<li>Sending keys on the editable iframe</li>
</ol>
<p>Here is how I automated two <a href="http://en.wikipedia.org/wiki/WYSIWYG" target="_blank" rel="external">WYSIWYG</a> editors using selenium web driver.</p>
<h3 id="bootstrap-wysihtml5">bootstrap-wysihtml5</h3><p>Website: <a href="http://jhollingworth.github.io/bootstrap-wysihtml5/" target="_blank" rel="external">http://jhollingworth.github.io/bootstrap-wysihtml5/</a></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">SetBootstrapWysihtml5Content</span>(<span class="params">IWebElement textArea, <span class="keyword">string</span> content</span>)</span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">string</span> script = <span class="keyword">string</span>.Format(<span class="string">@"$('#&#123;0&#125;').data('wysihtml5').editor.setValue('&#123;1&#125;');"</span>, textArea.GetAttribute(<span class="string">"id"</span>), content);</span><br><span class="line">    ((IJavaScriptExecutor)<span class="keyword">this</span>.WebDriver).ExecuteScript(script);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>What this method does is, it accepts the <code>TextArea</code> web element which you are converting to an editor and the actual content to be set. Then it executes a piece of JavaScript on the current <code>WebDriver</code> context.</p>
<p>For e.g. if you have a TextArea element with id <code>summary</code> then executing below JavaScript statement will insert a <code>h1</code> tag  with “Test” to the editor</p>
<p><code>$(&#39;#summary&#39;).data(&#39;wysihtml5&#39;).editor.setValue(&#39;&lt;h1&gt;Test&lt;/h1&gt;&#39;);</code></p>
<h3 id="TinyMCE">TinyMCE</h3><p>Website: <a href="http://www.tinymce.com/" target="_blank" rel="external">http://www.tinymce.com/</a></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">SetTinyMCEContent</span>(<span class="params">IWebElement textArea, <span class="keyword">string</span> content</span>)</span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">string</span> textAreaId = textArea.GetAttribute(<span class="string">"id"</span>);</span><br><span class="line">    <span class="keyword">string</span> frameId = <span class="keyword">string</span>.Format(<span class="string">"&#123;0&#125;_ifr"</span>, textAreaId);</span><br><span class="line">    <span class="keyword">var</span> frame = <span class="keyword">this</span>.WebDriver.FindElement(By.Id(frameId));</span><br><span class="line">    <span class="keyword">this</span>.WebDriver.SwitchTo().Frame(frame);</span><br><span class="line">    ((IJavaScriptExecutor)<span class="keyword">this</span>.WebDriver).ExecuteScript(<span class="string">"document.body.innerHTML = '"</span> + content + <span class="string">"'"</span>);</span><br><span class="line">    <span class="keyword">this</span>.WebDriver.SwitchTo().DefaultContent();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This method also accepts the <code>TextArea</code> web element which you are converting to an editor and the actual content to be set. Then it finds the corresponding <code>iframe</code> and set the <code>innerHTML</code> by executing a JavaScript statement.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2012/12/01/Automating-WYSIWYG-Editors-using-Selenium-Web-Driver/" data-id="ciffni8w9000yiskt8s04kuph" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2012/12/01/Automating-WYSIWYG-Editors-using-Selenium-Web-Driver/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Introducing-SourceCodeReader" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2012/08/02/Introducing-SourceCodeReader/" class="article-date">
  <time datetime="2012-08-02T06:51:32.000Z" itemprop="datePublished">2012-08-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/08/02/Introducing-SourceCodeReader/">Introducing SourceCodeReader</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Have you ever tried to understand a project just by going through the source code?</p>
<p>That’s how I do most of the time, till now I haven’t seen any up to date documentation which gives the clear understanding of how the code is implemented. In reality after a certain period during the development, documentation goes out of sync with the source code. So some one joins the project lately has only one way to understand the project <em>Go through the source code</em></p>
<p>Sometimes I go through the open source projects hosted on either Github, Codeplex or Google code. All the hosting site provide you with a user interface for browsing through the source code with syntax highlighting support, which is nice. The problem I had with this is – if I see a object creation statement, method call there is no way for me to find out how it is implemented other than manually going through the files and finding it out.</p>
<p>Most of the full blown editors provide a feature where you can navigate to the implementation directly from where it is used for e.g. Microsoft Visual Studio provides <em>Go To Definition</em> feature. I find this feature very much useful for understanding the project. Only draw back with this approach is you have to completely get the latest version of source code to your local machine.</p>
<p><a href="http://sourcecodereader.apphb.com/" target="_blank" rel="external">SourceCodeReader</a> is trying solve this navigation problem on the web. With this application you can open a project and browse through the files with code navigation support.</p>
<p>Source code for this project can be found at <a href="https://github.com/cvrajeesh/SourceCodeReader" target="_blank" rel="external">https://github.com/cvrajeesh/SourceCodeReader</a></p>
<h3 id="Limitations">Limitations</h3><ol>
<li>Now supports only Github code repository</li>
<li>Only supports .Net C#  projects, other type of projects also works without code navigation support</li>
</ol>
<h3 id="How_to_use_this_application">How to use this application</h3><p>Go to <a href="http://sourcecodereader.apphb.com/" target="_blank" rel="external">SourceCodeReader</a> and enter the URL of a C# project on Github</p>
<p><img src="http://cdn.rajeeshcv.com/images/2012/08/20120802065851_image_thumb.png" alt="SourceCodeReader home page"></p>
<p>Once you have entered a Github project link and open the project, it get the source code from the Github and present you with file browser.</p>
<p><img src="http://cdn.rajeeshcv.com/images/2012/08/20120802065857_image_thumb_2.png" alt="SourceCodeReader project directory"></p>
<p>When you navigate to a C# file you will be able to see clickable links for identifiers which takes you the file location where that is declared.</p>
<p><img src="http://cdn.rajeeshcv.com/images/2012/08/20120802065903_image_thumb_1.png" alt="SourceCodeReader Go To Definition feature"></p>
<p><strong>Sample projects :</strong></p>
<ul>
<li><a href="http://sourcecodereader.apphb.com/#/open/cvrajeesh/SourceCodeReader" target="_blank" rel="external">http://sourcecodereader.apphb.com/#/open/cvrajeesh/SourceCodeReader</a></li>
<li><a href="http://sourcecodereader.apphb.com/#/open/ayende/ravendb" target="_blank" rel="external">http://sourcecodereader.apphb.com/#/open/ayende/ravendb</a></li>
</ul>
<p>Hope you liked this idea, please provide me with your valuable feedback.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2012/08/02/Introducing-SourceCodeReader/" data-id="ciffni8sn000kiskthtvv6rcx" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2012/08/02/Introducing-SourceCodeReader/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08/">August 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/12/">December 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/11/">November 2011</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/10/">October 2011</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04/">April 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/02/">February 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/12/">December 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/09/">September 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/06/">June 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/04/">April 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/02/">February 2010</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/01/">January 2010</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/12/">December 2009</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/06/">June 2009</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/05/">May 2009</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/10/">October 2008</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/06/">June 2008</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/05/">May 2008</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/10/13/Build-Parsers-using-PEG-js/">Build Parsers using PEG.js</a>
          </li>
        
          <li>
            <a href="/2015/10/07/A-Different-Way-to-Organize-JavaScripts-in-ASP-Net-MVC/">A Different Way to Organize JavaScripts in ASP.Net MVC</a>
          </li>
        
          <li>
            <a href="/2015/05/08/How-to-Fill-Remaining-Height-with-a-Div/">How to Fill Remaining Height with a Div</a>
          </li>
        
          <li>
            <a href="/2015/05/07/Run-Gulp-Tasks-in-a-Predefined-Order/">Run Gulp Tasks in a Predefined Order</a>
          </li>
        
          <li>
            <a href="/2014/06/22/EmberJS-Error-Logging-in-Production/">EmberJS Error Logging in Production</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 Rajeesh C V<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
    <a href="/projects" class="mobile-nav-link">Projects</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'rajeeshcv';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>