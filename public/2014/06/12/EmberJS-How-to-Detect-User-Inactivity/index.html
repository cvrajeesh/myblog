<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>EmberJS - How to Detect User Inactivity | rajeesh</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Scenario:
I am working on a web application that has a Single Page Application module which is built using EmberJS framework.
This EmberJS application is a page designer where user can drag and drop i">
<meta property="og:type" content="article">
<meta property="og:title" content="EmberJS - How to Detect User Inactivity">
<meta property="og:url" content="http://rajeeshcv.com/2014/06/12/EmberJS-How-to-Detect-User-Inactivity/index.html">
<meta property="og:site_name" content="rajeesh">
<meta property="og:description" content="Scenario:
I am working on a web application that has a Single Page Application module which is built using EmberJS framework.
This EmberJS application is a page designer where user can drag and drop i">
<meta property="og:updated_time" content="2015-04-22T20:33:35.762Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="EmberJS - How to Detect User Inactivity">
<meta name="twitter:description" content="Scenario:
I am working on a web application that has a Single Page Application module which is built using EmberJS framework.
This EmberJS application is a page designer where user can drag and drop i">
<meta name="twitter:creator" content="@cvrajeesh">
<link rel="publisher" href="https://www.google.com/+RajeeshCV">
  
    <link rel="alternative" href="/atom.xml" title="rajeesh" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-647217-9', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">rajeesh</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Sharing My Thoughts</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
          <a class="main-nav-link" href="/projects">Projects</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://rajeeshcv.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-EmberJS-How-to-Detect-User-Inactivity" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/06/12/EmberJS-How-to-Detect-User-Inactivity/" class="article-date">
  <time datetime="2014-06-12T07:17:49.000Z" itemprop="datePublished">2014-06-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      EmberJS - How to Detect User Inactivity
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Scenario:</strong></p>
<p>I am working on a web application that has a Single Page Application module which is built using <a href="http://emberjs.com/" target="_blank" rel="external">EmberJS</a> framework.</p>
<p>This EmberJS application is a page designer where user can drag and drop items to the design surface and change properties of these items. Finally when the page is ready, he can save the changes back to server.</p>
<p><strong>Problem:</strong></p>
<p>Whenever a user works on the page designer for long period of time without saving the changes in between - finally when he try to save all of his changes in one shot, server side session was already timed out.</p>
<p><strong>Solution:</strong></p>
<p>Implemented an API on the server side which can refresh the session if this API is invoked.</p>
<p>So on the <a href="http://emberjs.com/" target="_blank" rel="external">EmberJS</a> application side we had to calculate how long a user not active. Then we can check for this inactivity time periodically and decide whether to refresh session or not.</p>
<p>An easy way to do it in EmberJS is by hooking to the <code>mousemove</code>, <code>keydown</code> events of the <code>ApplicationView</code>. Details can be found in the EmberJS documentation <a href="http://emberjs.com/api/classes/Ember.View.html#toc_responding-to-browser-events" target="_blank" rel="external">http://emberjs.com/api/classes/Ember.View.html#toc_responding-to-browser-events</a></p>
<p>Here is code sample which does this</p>
<p>First I am creating the application object with an additional property for tracking the last active time.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> App = Ember.Application.create(&#123;</span><br><span class="line">    lastActiveTime: <span class="literal">null</span>,</span><br><span class="line">    ready: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        App.lastActiveTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>After that, hook the events in which you are interested in <code>ApplicationView</code>, which will update the last active time defined in the application object.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">App.ApplicationView = Ember.View.extend(&#123;</span><br><span class="line">    templateName: <span class="string">'application'</span>,</span><br><span class="line"></span><br><span class="line">    mouseMove: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        App.lastActiveTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    touchStart: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        App.lastActiveTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    keyDown: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        App.lastActiveTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>In our case, I am interested on <code>mouseMove</code>, <code>touchStart</code> (for touch devices) and <code>keyDown</code> events. When they are getting fired I will update the last active time with current time.</p>
<p>Now you can use the last active time property to find out how long the user is active.</p>
<blockquote>
<p>Demo: <a href="http://cvrajeesh.github.io/emberjs/inactivity.html" target="_blank" rel="external">http://cvrajeesh.github.io/emberjs/inactivity.html</a></p>
</blockquote>
<p>This demo uses <a href="http://momentjs.com/" target="_blank" rel="external">moment.js</a> for calculating time difference as well as for formatting the time.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rajeeshcv.com/2014/06/12/EmberJS-How-to-Detect-User-Inactivity/" data-id="ciffni8uh000sisktshx1v052" class="article-share-link">Share</a>
      
        <a href="http://rajeeshcv.com/2014/06/12/EmberJS-How-to-Detect-User-Inactivity/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/06/22/EmberJS-Error-Logging-in-Production/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          EmberJS Error Logging in Production
        
      </div>
    </a>
  
  
    <a href="/2013/08/03/Visual-Studio-Debugging-Silverlight-Application-with-Chrome-and-Firefox/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Visual Studio : Debugging Silverlight Application with Chrome and Firefox</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    
  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08/">August 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/12/">December 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/11/">November 2011</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/10/">October 2011</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04/">April 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/02/">February 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/12/">December 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/09/">September 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/06/">June 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/04/">April 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/02/">February 2010</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/01/">January 2010</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/12/">December 2009</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/06/">June 2009</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/05/">May 2009</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/10/">October 2008</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/06/">June 2008</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/05/">May 2008</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/10/13/Build-Parsers-using-PEG-js/">Build Parsers using PEG.js</a>
          </li>
        
          <li>
            <a href="/2015/10/07/A-Different-Way-to-Organize-JavaScripts-in-ASP-Net-MVC/">A Different Way to Organize JavaScripts in ASP.Net MVC</a>
          </li>
        
          <li>
            <a href="/2015/05/08/How-to-Fill-Remaining-Height-with-a-Div/">How to Fill Remaining Height with a Div</a>
          </li>
        
          <li>
            <a href="/2015/05/07/Run-Gulp-Tasks-in-a-Predefined-Order/">Run Gulp Tasks in a Predefined Order</a>
          </li>
        
          <li>
            <a href="/2014/06/22/EmberJS-Error-Logging-in-Production/">EmberJS Error Logging in Production</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 Rajeesh C V<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
    <a href="/projects" class="mobile-nav-link">Projects</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'rajeeshcv';
  
  var disqus_url = 'http://rajeeshcv.com/2014/06/12/EmberJS-How-to-Detect-User-Inactivity/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>